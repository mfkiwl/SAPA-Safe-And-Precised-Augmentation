#ifndef GNSS_BASE_H_
#define GNSS_BASE_H_

#ifdef __cplusplus
extern "C" {
#endif

#include "compiler.h"

//static const GPPUINT4 GNSS_PRN_BIT_MASK_8[8]={0x01,0x02,0x04,0x08,
//            0x10,0x20,0x40,0x80};
static const GPPUINT1 GNSS_PRN_BIT_MASK_8[8] = { 0x01,0x02,0x04,0x08,
		  0x10,0x20,0x40,0x80 };


//static const GPPUINT4 GNSS_PRN_BIT_MASK_16[16]={  0x0001,0x0002,0x0004,0x0008,
//             0x0010,0x0020,0x0040,0x0080,
//           0x0100,0x0200,0x0400,0x0800,
//           0x1000,0x2000,0x4000,0x8000};
static const GPPUINT2 GNSS_PRN_BIT_MASK_16[16] = { 0x0001,0x0002,0x0004,0x0008,
		   0x0010,0x0020,0x0040,0x0080,
		   0x0100,0x0200,0x0400,0x0800,
		   0x1000,0x2000,0x4000,0x8000 };


static const GPPUINT4 GNSS_PRN_BIT_MASK_32[32] = { 0x00000001,0x00000002,0x00000004,0x00000008,
		   0x00000010,0x00000020,0x00000040,0x00000080,
		   0x00000100,0x00000200,0x00000400,0x00000800,
		   0x00001000,0x00002000,0x00004000,0x00008000,
		   0x00010000,0x00020000,0x00040000,0x00080000,
		   0x00100000,0x00200000,0x00400000,0x00800000,
		   0x01000000,0x02000000,0x04000000,0x08000000,
		   0x10000000,0x20000000,0x40000000,0x80000000 };

#if defined(__WATCOMC__) && (__WATCOMC__ < 1280)
static const GPPUINT8 GNSS_PRN_BIT_MASK_64[64] = {
		   0x0000000000000001,0x0000000000000002,0x0000000000000004,0x0000000000000008,
		   0x0000000000000010,0x0000000000000020,0x0000000000000040,0x0000000000000080,
		   0x0000000000000100,0x0000000000000200,0x0000000000000400,0x0000000000000800,
		   0x0000000000001000,0x0000000000002000,0x0000000000004000,0x0000000000008000,
		   0x0000000000010000,0x0000000000020000,0x0000000000040000,0x0000000000080000,
		   0x0000000000100000,0x0000000000200000,0x0000000000400000,0x0000000000800000,
		   0x0000000001000000,0x0000000002000000,0x0000000004000000,0x0000000008000000,
		   0x0000000010000000,0x0000000020000000,0x0000000040000000,0x0000000080000000,
		   0x0000000100000000,0x0000000200000000,0x0000000400000000,0x0000000800000000,
		   0x0000001000000000,0x0000002000000000,0x0000004000000000,0x0000008000000000,
		   0x0000010000000000,0x0000020000000000,0x0000040000000000,0x0000080000000000,
		   0x0000100000000000,0x0000200000000000,0x0000400000000000,0x0000800000000000,
		   0x0001000000000000,0x0002000000000000,0x0004000000000000,0x0008000000000000,
		   0x0010000000000000,0x0020000000000000,0x0040000000000000,0x0080000000000000,
		   0x0100000000000000,0x0200000000000000,0x0400000000000000,0x0800000000000000,
		   0x1000000000000000,0x2000000000000000,0x4000000000000000,0x8000000000000000 };
#else
static const GPPUINT8 GNSS_PRN_BIT_MASK_64[64] = {
		   0x0000000000000001ULL,0x0000000000000002ULL,0x0000000000000004ULL,0x0000000000000008ULL,
		   0x0000000000000010ULL,0x0000000000000020ULL,0x0000000000000040ULL,0x0000000000000080ULL,
		   0x0000000000000100ULL,0x0000000000000200ULL,0x0000000000000400ULL,0x0000000000000800ULL,
		   0x0000000000001000ULL,0x0000000000002000ULL,0x0000000000004000ULL,0x0000000000008000ULL,
		   0x0000000000010000ULL,0x0000000000020000ULL,0x0000000000040000ULL,0x0000000000080000ULL,
		   0x0000000000100000ULL,0x0000000000200000ULL,0x0000000000400000ULL,0x0000000000800000ULL,
		   0x0000000001000000ULL,0x0000000002000000ULL,0x0000000004000000ULL,0x0000000008000000ULL,
		   0x0000000010000000ULL,0x0000000020000000ULL,0x0000000040000000ULL,0x0000000080000000ULL,
		   0x0000000100000000ULL,0x0000000200000000ULL,0x0000000400000000ULL,0x0000000800000000ULL,
		   0x0000001000000000ULL,0x0000002000000000ULL,0x0000004000000000ULL,0x0000008000000000ULL,
		   0x0000010000000000ULL,0x0000020000000000ULL,0x0000040000000000ULL,0x0000080000000000ULL,
		   0x0000100000000000ULL,0x0000200000000000ULL,0x0000400000000000ULL,0x0000800000000000ULL,
		   0x0001000000000000ULL,0x0002000000000000ULL,0x0004000000000000ULL,0x0008000000000000ULL,
		   0x0010000000000000ULL,0x0020000000000000ULL,0x0040000000000000ULL,0x0080000000000000ULL,
		   0x0100000000000000ULL,0x0200000000000000ULL,0x0400000000000000ULL,0x0800000000000000ULL,
		   0x1000000000000000ULL,0x2000000000000000ULL,0x4000000000000000ULL,0x8000000000000000ULL };
#endif



#define GNSS_SET_ID_IN_BITS_8(sats,id) ((sats)|=GNSS_PRN_BIT_MASK_8[(id)-1])
#define GNSS_SET_ID_IN_BITS_16(sats,id) ((sats)|=GNSS_PRN_BIT_MASK_16[(id)-1])
#define GNSS_SET_ID_IN_BITS_32(sats,id) ((sats)|=GNSS_PRN_BIT_MASK_32[(id)-1])
#define GNSS_SET_ID_IN_BITS_64(sats,id) ((sats)|=GNSS_PRN_BIT_MASK_64[(id)-1])
#define GNSS_HAS_ID_IN_BITS_8(sats,id) ((sats)&GNSS_PRN_BIT_MASK_8[(id)-1])
#define GNSS_HAS_ID_IN_BITS_16(sats,id) ((sats)&GNSS_PRN_BIT_MASK_16[(id)-1])
#define GNSS_HAS_ID_IN_BITS_32(sats,id) ((sats)&GNSS_PRN_BIT_MASK_32[(id)-1])
#define GNSS_HAS_ID_IN_BITS_64(sats,id) ((sats)&GNSS_PRN_BIT_MASK_64[(id)-1])
#define GNSS_UNSET_ID_IN_BITS_8(sats,id) ((sats)&=GNSS_PRN_INV_BIT_MASK_8[(id)-1])
#define GNSS_UNSET_ID_IN_BITS_16(sats,id) ((sats)&=GNSS_PRN_INV_BIT_MASK_16[(id)-1])
#define GNSS_UNSET_ID_IN_BITS_32(sats,id) ((sats)&=GNSS_PRN_INV_BIT_MASK_32[(id)-1])
#define GNSS_UNSET_ID_IN_BITS_64(sats,id) ((sats)&=GNSS_PRN_INV_BIT_MASK_64[(id)-1])

#define GNSS_SET_IDX_IN_BITS_8(sats,idx) ((sats)|=GNSS_PRN_BIT_MASK_8[(idx)])
#define GNSS_SET_IDX_IN_BITS_16(sats,idx) ((sats)|=GNSS_PRN_BIT_MASK_16[(idx)])
#define GNSS_SET_IDX_IN_BITS_32(sats,idx) ((sats)|=GNSS_PRN_BIT_MASK_32[(idx)])
#define GNSS_SET_IDX_IN_BITS_64(sats,idx) ((sats)|=GNSS_PRN_BIT_MASK_64[(idx)])
#define GNSS_HAS_IDX_IN_BITS_8(sats,idx) ((sats)&GNSS_PRN_BIT_MASK_8[(idx)])
#define GNSS_HAS_IDX_IN_BITS_16(sats,idx) ((sats)&GNSS_PRN_BIT_MASK_16[(idx)])
#define GNSS_HAS_IDX_IN_BITS_32(sats,idx) ((sats)&GNSS_PRN_BIT_MASK_32[(idx)])
#define GNSS_HAS_IDX_IN_BITS_64(sats,idx) ((sats)&GNSS_PRN_BIT_MASK_64[(idx)])
#define GNSS_UNSET_IDX_IN_BITS_8(sats,idx) ((sats)&=GNSS_PRN_INV_BIT_MASK_8[(idx)])
#define GNSS_UNSET_IDX_IN_BITS_16(sats,idx) ((sats)&=GNSS_PRN_INV_BIT_MASK_16[(idx)])
#define GNSS_UNSET_IDX_IN_BITS_32(sats,idx) ((sats)&=GNSS_PRN_INV_BIT_MASK_32[(idx)])
#define GNSS_UNSET_IDX_IN_BITS_64(sats,idx) ((sats)&=GNSS_PRN_INV_BIT_MASK_64[(idx)])


#endif //GNSS_BASE_H_